package dbal

// Code generated by a tool. DO NOT EDIT.
// Additional custom methods can be implemented in a separate file like <this_file>_ex.go.
// https://sqldalmaker.sourceforge.net/

import (
	"context"
	"sdm_demo_todolist/no_orm/dbal/dto"
)

type ProjectsDao2 struct {
	ds DataStore
}

func (dao *ProjectsDao2) ReadProjectList(ctx context.Context) (res []*dto.Project, err error) {
	sql := `select * from projects`
	errMap := make(map[string]int)
	_onRow := func(row map[string]interface{}) {
		item := dto.Project{}
		SetInt64(&item.PId, row, "p_id", errMap)
		SetString(&item.PName, row, "p_name", errMap)
		res = append(res, &item)
	}
	err = dao.ds.QueryAllRows(ctx, sql, _onRow)
	if err == nil {
		err = ErrMapToErr(errMap)
	}
	return
}
